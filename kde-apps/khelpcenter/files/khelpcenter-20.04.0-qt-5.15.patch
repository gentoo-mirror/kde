From af7c68f76b3bc0835660cf661d30b60a42251218 Mon Sep 17 00:00:00 2001
From: Johnny Jazeix <jazeix@gmail.com>
Date: Sat, 18 Apr 2020 11:13:32 +0200
Subject: fix compilation for Qt > 5.14: QSet::fromList(QList) deprecated

---
 searchhandlers/cachereader.cpp | 7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)


From b261bf9113e39bf46a393b2bfdfcb26fdf3ed8a2 Mon Sep 17 00:00:00 2001
From: Johnny Jazeix <jazeix@gmail.com>
Date: Sat, 18 Apr 2020 12:31:48 +0200
Subject: avoid intermediate list and cleaner way to convert to QSet

---
 searchhandlers/cachereader.cpp | 5 ++---
 1 file changed, 2 insertions(+), 3 deletions(-)

diff --git a/searchhandlers/cachereader.cpp b/searchhandlers/cachereader.cpp
index 5f160c8..560e43a 100644
--- a/searchhandlers/cachereader.cpp
+++ b/searchhandlers/cachereader.cpp
@@ -105,7 +105,11 @@ bool CacheReader::parse( const QString& file )
 
 QSet<QString> CacheReader::documents() const
 {
-  return QSet<QString>::fromList( mRanges.uniqueKeys() );
+#if QT_VERSION < QT_VERSION_CHECK(5, 14, 0)
+  return QSet<QString>::fromList( mRanges.uniqueKeys() );
+#else
+  return QSet<QString>( mRanges.keyBegin(), mRanges.keyEnd() );
+#endif
 }
 
 QByteArray CacheReader::document( const QString& id ) const
-- 
cgit v1.1

